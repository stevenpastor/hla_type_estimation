profiles {
  slurm {
    process.executor = 'slurm'
    process.queue = { params.slurm?.partition ?: null }
    process.clusterOptions = {
      def opts = []
      if (params.slurm?.account) opts << "--account=${params.slurm.account}"
      if (params.slurm?.qos)     opts << "--qos=${params.slurm.qos}"
      opts ? opts.join(' ') : null
    }
    process.time = { params.slurm?.time ?: '4h' }
  }

  singularity {
    singularity.enabled    = true
    singularity.autoMounts = true
    singularity.cacheDir   = "${baseDir}/.singularity"
    docker.enabled         = false
    podman.enabled         = false
  }
}

params {
  fastq1 = null
  fastq2 = null
  outdir = "results"
  cpus = 8
  memory_gb = 32
  arcashla_gene_list = "A,B,C"
  slurm = [:]
}

workDir = 'work'

process {
  withName: ARCASHLA {
    container = 'docker://jfx319/arcashla'
  }
}

